<!--pages/chat/chat.wxml-->
<view style='height: 65rpx;'>
  <view style='position: absolute;width: 20%;height: 150rpx;left: 4%;bottom: 87%;'>发现</view>
  <view bindtap='doWordIndentify' style='position: absolute;width: 20%;height: 150rpx;left: 24%;bottom: 87%;'>内容</view>
  <view style='position: absolute;width: 20%;height: 150rpx;left: 44%;bottom: 87%;'>语音</view>
  <view style='position: absolute;width: 20%;height: 150rpx;left: 64%;bottom: 87%;'>文字</view>
  <view style='position: absolute;width: 20%;height: 150rpx;left: 82%;bottom: 87%;'>志愿者</view>
</view>
<view style='position: absolute;width: 100%;height: 3rpx;background-color: black;bottom: 95%;'></view>

<view class="container">
  <scroll-view class="scrool-view" scroll-y="true" scroll-with-animation="true" scroll-into-view="{{scrolltop}}" enable-back-to-top="true">
    <view class="chat-list">
      <block wx:for="{{chatList}}" wx:key="time">

        <!-- 回复输出 -->
        <view id="roll{{index + 1}}" class="chat-left" wx:if="{{item.orientation == 'l' && item.text == '<<<'}}">
          <image class="avatar-img" src="../image/chat_logo.png"></image>
          <view wx:if="{{showOcrResult}}">
            <text wx:for="{{ocrResult}}" wx:for-item="item" wx:for-index="idx" class='chat-text-left'>
            {{item.tag_name}} : {{item.tag_confidence}}
            </text>
          </view>
          <image class="avatar-img"></image>
        </view>

        <!-- 用户输入 -->
        <view id="roll{{index + 1}}" class="chat-right">
          <!-- 语音输入 -->
          <view wx:if="{{item.orientation == 'v'}}">
            <view data-key="{{voice}}" bindtap='gotoPlay'>
              <image src='../image/speaker6.png' mode='aspectFit'></image>
            </view>
          </view>
          <!-- 图片 -->
          <view wx:if="{{item.orientation == 'p'}}">
            <image src='{{imgUrl}}' mode='aspectFit'></image>
          </view>
          <!-- 文本输入 -->
          <view class='chat-text-right' wx:if="{{item.orientation == 'r'}}">
          <text>{{item.text}}{{item.url}}</text>
          </view>
          <!-- 用户头像 -->
          <image class="avatar-img" src="{{userLogoUrl}}"></image>
        </view>
      </block>
    </view>
  </scroll-view>

  <form bindsubmit="sendChat">
    <view class="ask-input-word" style='left: 10rpx;'>
      <image class="text-video-img" src="../image/speak.png" hidden="{{keyboard}}" bindtap="switchInputType"></image>
      <image class="text-video-img" src="../image/keyboard.png" hidden="{{!keyboard}}" bindtap="switchInputType"></image>
      <input class="input-big" hidden="{{keyboard}}" focus="{{!keyboard}}" placeholder="" confirm-type="send" name="ask_word" type="text" bindconfirm="sendChat" bindinput="Typing" value="{{askWord}}" />
      <button hidden="{{!keyboard}}" bindtouchstart="touchdown" bindtouchend="touchup">按住 说话</button>
      <image src='../image/camera.png' mode='aspectFit' class='camera-album' bindtap='openCamera'></image>
      <image src='../image/album.png' mode='aspectFit' class='camera-album' bindtap='checkPic'></image>
    </view>
  </form>
</view>
<image class="speaker" hidden="{{!isSpeaking}}" src="{{speakerUrl}}"></image>